# Web-ларёк

## Описание проекта

Web-ларёк — учебное веб-приложение интернет-магазина с товарами для веб-разработчиков.  
Приложение позволяет просматривать каталог товаров, добавлять товары в корзину и оформлять заказ в два шага.

Основная цель проекта — спроектировать архитектуру веб-приложения с использованием TypeScript и принципов объектно-ориентированного программирования, а также задокументировать выбранные архитектурные решения.

Проект реализован на основе MVP-архитектуры с использованием брокера событий для организации взаимодействия между частями приложения.

---

## Используемый стек

- HTML
- SCSS
- TypeScript
- Webpack    
- Архитектурный паттерн: **MVP (Model–View–Presenter)**  
- Брокер событий (**EventEmitter**)  
- REST API  

---

## Установка и запуск проекта

1. Клонировать репозиторий:
   ```bash
   git clone https://github.com/smirnov-dev-frontend/web-larek-frontend.git
2. Установить зависимости:
   ```bash 
   npm intall
3. В корне проекта создать файл .env и добавить в него:
   ```bash 
   API_ORIGIN=https://larek-api.nomoreparties.co
4. Запустить проект:
   ```bash 
   npm run start
5. Cобрать проект:
   ```bash 
   npm run build

---

## Архитектура приложения

### Общий подход

В проекте используется архитектурный паттерн **MVP (Model–View–Presenter)**.

Архитектура разделена на следующие слои:

- **Model** — данные и бизнес-логика;
- **View** — отображение и работа с DOM;
- **Presenter** — связующий слой между Model и View;
- **Инфраструктурный слой** — API-клиент, брокер событий, утилиты.

Взаимодействие между частями приложения реализовано через брокер событий, что обеспечивает слабую связанность компонентов и упрощает масштабирование приложения.

---

### Модели (Model)

Модели отвечают за хранение данных и бизнес-логику приложения.  
Они не взаимодействуют с DOM и не зависят от компонентов отображения.

#### ProductModel

Отвечает за:
- загрузку каталога товаров через API;
- хранение списка товаров;
- предоставление данных управляющему слою.

#### CartModel

Отвечает за:
- хранение товаров, добавленных в корзину;
- добавление и удаление товаров;
- расчёт итоговой стоимости корзины.

#### OrderModel

Отвечает за:
- хранение данных заказа;
- валидацию данных пользователя (адрес, контакты);
- оформление заказа;
- очистку корзины после успешной оплаты.

---

### Отображения (View)

Компоненты отображения отвечают за работу с DOM и визуальное представление данных.

Каждый компонент:
- управляет только своим DOM-фрагментом;
- хранит используемые DOM-элементы в полях класса;
- не содержит бизнес-логики;
- взаимодействует с внешним миром через события.

#### ProductCardView

- отображает карточку товара;
- генерирует событие выбора товара.

#### ProductListView

- отображает список товаров;
- рендерит карточки товаров на основе переданных данных.

#### CartView

- отображает содержимое корзины;
- позволяет удалять товары;
- инициирует переход к оформлению заказа.

#### OrderFormView

- отображает формы оформления заказа;
- управляет шагами оформления;
- отображает ошибки валидации.

#### ModalView

Базовый компонент для модальных окон:
- открытие и закрытие модального окна;
- закрытие по клику вне окна;
- обработка кнопки закрытия.

---

### Управляющий слой (Presenter)

Presenter связывает модели и отображения:

- подписывается на события от View;
- вызывает методы Model;
- обновляет View при изменении состояния данных.

#### CatalogPresenter

- связывает ProductModel и ProductListView;
- обрабатывает выбор товара;
- управляет отображением модального окна товара.

#### CartPresenter

- связывает CartModel и CartView;
- управляет добавлением и удалением товаров;
- контролирует доступность действий пользователя.

#### OrderPresenter

- управляет процессом оформления заказа;
- проверяет корректность введённых данных;
- завершает оформление заказа.

---

### Событийная модель

Для взаимодействия между слоями используется брокер событий.

Примеры событий:
- `product:selected`
- `cart:add`
- `cart:remove`
- `order:submit`
- `order:success`

Использование событий позволяет избежать прямых зависимостей между компонентами и упрощает расширение приложения.

---

### Типы данных

Типы данных описаны в директории `src/types/`.

В проекте определены:
- типы данных, приходящих с API;
- типы данных, используемые для отображения;
- интерфейсы моделей;
- интерфейсы компонентов отображения;
- интерфейсы базовых классов;
- перечисления и интерфейсы событий.

Типы данных используются для обеспечения строгой типизации и соответствуют описанной архитектуре.
